<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Mysql OF CodeWithMosh | WRXinYue's Blog</title><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - 共 $1 行","copy":"复制","copyFinish":"复制成功","expand":"展开"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><script>mermaid.initialize({
 startOnLoad: true
 , theme: 'dark'
});</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.6.0/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body style="background-image:url(https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg);"><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><ol class="navContent"><li class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></li><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem"><a class="navBlock" href="/contact/"><span class="navItemTitle">Contact</span></a></li></ol></nav><div class="search-popup"><div id="search-result"></div></div></header><article><div id="post-bg"><div id="post-title"><h1>Mysql OF CodeWithMosh</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2022-12-01T12:02:26.992Z" id="date"> 2022-12-01</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2023-05-08T08:30:13.000Z" id="updated"> 2023-05-08</time></div></span></div></div><hr><div id="post-content"><h1 id="Ⅱ"><a href="#Ⅱ" class="headerlink" title="Ⅱ"></a>Ⅱ</h1><h2 id="The-SELECT-Clause"><a href="#The-SELECT-Clause" class="headerlink" title="The SELECT Clause"></a>The SELECT Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT 	<br>	first_name, <br>	last_name, <br>	points, <br>	(points + 10) * 100 AS &#x27;discount factor&#x27;<br>FROM customers<br>-- WHERE customer_id = 1<br>-- ORDER BY first_name<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130145315129.png" alt="image-20221130145315129"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT state FROM customers;<br></code></pre></td></tr></table></figure>

<p><em>DISTINCT</em> - 用于返回唯一不同的值</p>
<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130145229628.png" alt="image-20221130145229628"></p>
<h2 id="The-WHERE-Clause"><a href="#The-WHERE-Clause" class="headerlink" title="The WHERE Clause"></a>The WHERE Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM Customers<br>WHERE points &gt; 3000;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130150958390.png" alt="image-20221130150958390"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM Customers<br>-- WHERE state != &#x27;va&#x27;<br>WHERE state &lt;&gt; &#x27;va&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130151118887.png" alt="image-20221130151118887"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM Customers<br>WHERE birth_date &gt; &#x27;1990-01-01&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130151157095.png" alt="image-20221130151157095"></p>
<h2 id="The-AND-OR-and-NOT-Operators"><a href="#The-AND-OR-and-NOT-Operators" class="headerlink" title="The AND,OR and NOT Operators"></a>The AND,OR and NOT Operators</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM Customers<br>-- WHERE birth_date &gt; &#x27;1990-01-01&#x27; &amp;&amp; points &gt; 1000 || state = &quot;VA&quot;<br>WHERE birth_date &gt; &#x27;1990-01-01&#x27; AND points &gt; 1000 OR state = &#x27;VA&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130155206238.png" alt="image-20221130155206238"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM Customers<br>WHERE NOT (birth_date &gt; &#x27;1990-01-01&#x27; OR points &gt; 1000);<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130155309656.png" alt="image-20221130155309656"></p>
<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130155452610.png" alt="image-20221130155452610"></p>
<h2 id="The-IN-Operator"><a href="#The-IN-Operator" class="headerlink" title="The IN Operator"></a>The IN Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM Customers<br>-- WHERE state = &#x27;VA&#x27; OR state = &#x27;GA&#x27; OR state = &#x27;FL&#x27;<br>WHERE state IN (&#x27;VA&#x27;,&#x27;FL&#x27;,&#x27;GA&#x27;);<br>-- WHERE state NOT IN (&#x27;VA&#x27;,&#x27;FL&#x27;,&#x27;GA&#x27;)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130202320809.png" alt="image-20221130202320809"></p>
<h2 id="The-BETWEEN-Operator"><a href="#The-BETWEEN-Operator" class="headerlink" title="The BETWEEN Operator"></a>The BETWEEN Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>-- WHERE points &gt;= 1000 AND points &lt;= 3000<br>WHERE points BETWEEN 1000 AND 3000;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130203222460.png" alt="image-20221130203222460"></p>
<h2 id="The-LIKE-Operator"><a href="#The-LIKE-Operator" class="headerlink" title="The LIKE Operator"></a>The LIKE Operator</h2><ul>
<li><code>%</code> any number of characters</li>
<li><code>_</code> single character</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>WHERE last_name LIKE &#x27;%b%&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130204201974.png" alt="image-20221130204201974"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>WHERE last_name LIKE &#x27;b____y&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130204234121.png" alt="image-20221130204234121"></p>
<h2 id="The-REGEXP-Operator"><a href="#The-REGEXP-Operator" class="headerlink" title="The REGEXP Operator"></a>The REGEXP Operator</h2><ul>
<li><code>^</code>   beginning</li>
<li><code>$</code>   end</li>
<li><code>|</code>   logical or</li>
<li><code>[abcd]</code></li>
<li><code>[a-f]</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>-- WHERE last_name LIKE &#x27;%field&#x27; OR last_name LIKE &#x27;mac%&#x27; OR last_name LIKE &#x27;%rose%&#x27;<br>WHERE last_name REGEXP &#x27;field$|^mac|rose&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130210217163.png" alt="image-20221130210217163"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>WHERE last_name REGEXP &#x27;[a-h]e&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130210238524.png" alt="image-20221130210238524"></p>
<h2 id="The-IS-NULL-Operator"><a href="#The-IS-NULL-Operator" class="headerlink" title="The IS NULL Operator"></a>The IS NULL Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>-- WHERE phone NOT IS NULL<br>WHERE phone IS NULL;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130210848544.png" alt="image-20221130210848544"></p>
<h2 id="The-ORDER-BY-Clause"><a href="#The-ORDER-BY-Clause" class="headerlink" title="The ORDER BY Clause"></a>The ORDER BY Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>ORDER BY points DESC;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130212536832.png" alt="image-20221130212536832"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT birth_date, first_name, last_name, 10 AS points<br>FROM customers<br>ORDER BY 1, 2;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130212522151.png" alt="image-20221130212522151"></p>
<h2 id="The-LIMIT-Clause"><a href="#The-LIMIT-Clause" class="headerlink" title="The LIMIT Clause"></a>The LIMIT Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers<br>LIMIT 6, 3;<br>-- page 1: 1 - 3<br>-- page 2: 4 - 6<br>-- page 3: 7 - 9<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130213146262.png" alt="image-20221130213146262"></p>
<h1 id="Ⅲ"><a href="#Ⅲ" class="headerlink" title="Ⅲ"></a>Ⅲ</h1><h2 id="Inner-Joins"><a href="#Inner-Joins" class="headerlink" title="Inner Joins"></a>Inner Joins</h2><p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201100403520.png" alt="image-20221201100403520"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT order_id, orders.customer_id, first_name, last_name<br>FROM orders<br>INNER JOIN customers<br>	ON orders.customer_id = customers.customer_id;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT order_id, o.customer_id, first_name, last_name<br>FROM orders o<br>JOIN customers c<br>	ON o.customer_id = c.customer_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130214455720.png" alt="image-20221130214455720"></p>
<h2 id="Joining-Across-Databases"><a href="#Joining-Across-Databases" class="headerlink" title="Joining Across Databases"></a>Joining Across Databases</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">USE sql_store;<br><br>SELECT *<br>FROM order_items oi<br>JOIN sql_inventory.products p<br>	ON oi.product_id = p.product_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130215210224.png" alt="image-20221130215210224"></p>
<h2 id="Self-Joins"><a href="#Self-Joins" class="headerlink" title="Self Joins"></a>Self Joins</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">USE sql_hr;<br><br>SELECT<br>	e.employee_id,<br>	e.first_name,<br>	m.first_name AS manager<br>FROM employees e<br>JOIN employees m<br>	ON e.reports_to = m.employee_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221130220416319.png" alt="image-20221130220416319"></p>
<h2 id="Joining-Multiple-Tables"><a href="#Joining-Multiple-Tables" class="headerlink" title="Joining Multiple Tables"></a>Joining Multiple Tables</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">USE sql_store;<br><br>SELECT<br>	o.order_id,<br>	o.order_date,<br>	c.first_name,<br>	c.last_name,<br>	os.name AS status<br>FROM orders o<br>JOIN customers c<br>	ON o.customer_id = c.customer_id<br>JOIN order_statuses os<br>	ON o.status = os.order_status_id<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201092822387.png" alt="image-20221201092822387"></p>
<h2 id="Compound-Join-Conditions"><a href="#Compound-Join-Conditions" class="headerlink" title="Compound Join Conditions"></a>Compound Join Conditions</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM order_items oi<br>JOIN order_item_notes oin<br>	ON oi.order_id = oin.order_id<br>	AND oi.product_id = oin.product_id<br></code></pre></td></tr></table></figure>



<h2 id="Implicit-Join-Syntax"><a href="#Implicit-Join-Syntax" class="headerlink" title="Implicit Join Syntax"></a>Implicit Join Syntax</h2><p>不建议使用隐式连接，WHERE不能省略 否则造成笛卡尔积 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM orders o<br>JOIN customers c<br>	ON o.customer_id = c.customer_id;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- Implpicit Join Syntax<br>SELECT *<br>FROM orders o, customers c<br>WHERE o.customer_id = c.customer_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201094922845.png" alt="image-20221201094922845"></p>
<h2 id="Outer-Joins"><a href="#Outer-Joins" class="headerlink" title="Outer Joins"></a>Outer Joins</h2><p>左连接就是以FROM后面的表为主，右连接就是以JOIN 后面的表为主</p>
<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201100518304.png" alt="image-20221201100518304"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- LEFT JOIN<br>SELECT<br>	c.customer_id,<br>	c.first_name,<br>	o.order_id<br>FROM customers c<br>-- LEFT OUTER JOIN orders o<br>LEFT JOIN orders o<br>	ON c.customer_id = o.customer_id<br>ORDER BY c.customer_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201095918049.png" alt="image-20221201095918049"></p>
<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201100546806.png" alt="image-20221201100546806"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- RIGHT JOIN<br>SELECT<br>	c.customer_id,<br>    c.first_name,<br>    o.order_id<br>FROM customers c<br>-- RIGHT OUTER JOIN orders o<br>RIGHT JOIN orders o<br>	ON c.customer_id = o.customer_id<br>ORDER BY c.customer_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201095953308.png" alt="image-20221201095953308"></p>
<h2 id="Outer-Joins-Between-Multiple-Tables"><a href="#Outer-Joins-Between-Multiple-Tables" class="headerlink" title="Outer Joins Between Multiple Tables"></a>Outer Joins Between Multiple Tables</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM customers c<br>LEFT JOIN orders o<br>	ON c.customer_id = o.customer_id<br>LEFT JOIN shippers sh<br>	ON o.shipper_id = sh.shipper_id<br>ORDER BY c.customer_id;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201102129055.png" alt="image-20221201102129055"></p>
<h2 id="Self-Outer-Joins"><a href="#Self-Outer-Joins" class="headerlink" title="Self Outer Joins"></a>Self Outer Joins</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	e.employee_id,<br>	e.first_name,<br>	m.first_name AS manager<br>FROM employees e<br>LEFT JOIN employees m<br>	ON e.reports_to = m.employee_id<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201112329462.png" alt="image-20221201112329462"></p>
<h2 id="The-USING-Clause"><a href="#The-USING-Clause" class="headerlink" title="The USING Clause"></a>The USING Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	o.order_id,<br>    c.first_name,<br>    sh.name AS shipper<br>FROM orders o<br>JOIN customers c<br>	-- ON o.customer_id = c.customer_id<br>    USING (customer_id)<br>LEFT JOIN shippers sh<br>	USING (shipper_id);<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201113617556.png" alt="image-20221201113617556"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM order_items oi<br>JOIN order_item_notes oin<br>	-- ON oi.order_id = oin.order_id AND<br>		-- oi.product_id = oin.product_id<br>	USING(order_id, product_id);<br></code></pre></td></tr></table></figure>



<h2 id="Natural-Joins"><a href="#Natural-Joins" class="headerlink" title="Natural Joins"></a>Natural Joins</h2><p><em>不建议使用随缘大法</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	o.order_id,<br>    c.first_name<br>FROM orders o<br>NATURAL JOIN customers c<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201114156839.png" alt="image-20221201114156839"></p>
<h2 id="Cross-Joins"><a href="#Cross-Joins" class="headerlink" title="Cross Joins"></a>Cross Joins</h2><p><em>笛卡尔积</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	c.first_name AS customer,<br>	p.name AS product<br>-- FROM customers c, products p<br>FROM customers c<br>CROSS JOIN products p<br>ORDER BY c.first_name<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201115028098.png" alt="image-20221201115028098"></p>
<h2 id="Unions"><a href="#Unions" class="headerlink" title="Unions"></a>Unions</h2><p><em>没啥用,但是并和列数必须相等</em></p>
<p><code>UNION</code> &#x2F; <code>UNION ALL</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	order_id,<br>	order_date,<br>	&#x27;Active&#x27; AS status<br>FROM orders<br>WHERE order_date &gt;= &#x27;2019-01-01&#x27;<br>UNION<br>SELECT<br>	order_id,<br>	order_date,<br>	&#x27;Archived&#x27; AS status<br>FROM orders<br>WHERE order_date &lt; &#x27;2019-01-01&#x27;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201124209848.png" alt="image-20221201124209848"></p>
<h1 id="Ⅳ"><a href="#Ⅳ" class="headerlink" title="Ⅳ"></a>Ⅳ</h1><h2 id="Column-Attributes"><a href="#Column-Attributes" class="headerlink" title="Column Attributes"></a>Column Attributes</h2><p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201124936727.png" alt="image-20221201124936727"></p>
<ul>
<li>PK – 主键</li>
<li>NN – 非空值</li>
<li>AI – 自动递增</li>
<li>Default&#x2F;Expression – 默认值</li>
</ul>
<h2 id="Inserting-a-Single-Row"><a href="#Inserting-a-Single-Row" class="headerlink" title="Inserting a Single Row"></a>Inserting a Single Row</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO customers<br>VALUES (<br>	DEFAULT,<br>    &#x27;John&#x27;,<br>    &#x27;Smith&#x27;,<br>    &#x27;1990-01-01&#x27;,<br>    NULL,<br>    &#x27;address&#x27;,<br>    &#x27;city&#x27;,<br>    &#x27;CA&#x27;,<br>    DEFAULT<br>);<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO customers (<br>	first_name,<br>    last_name,<br>    birth_date,<br>    address,<br>    city,<br>    state)<br>VALUES (<br>    &#x27;John&#x27;,<br>    &#x27;Smith&#x27;,<br>    &#x27;1990-01-01&#x27;,<br>    &#x27;address&#x27;,<br>    &#x27;city&#x27;,<br>    &#x27;CA&#x27;<br>);<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201140340682.png" alt="image-20221201140340682"></p>
<h2 id="Inserting-Multiple-Rows"><a href="#Inserting-Multiple-Rows" class="headerlink" title="Inserting Multiple Rows"></a>Inserting Multiple Rows</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO shippers (name)<br>VALUES (&#x27;Shipper1&#x27;),<br>	(&#x27;Shipper2&#x27;),<br>	(&#x27;Shipper3&#x27;);<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201141627554.png" alt="image-20221201141627554"></p>
<h2 id="Inserting-Hierarchical-Rows"><a href="#Inserting-Hierarchical-Rows" class="headerlink" title="Inserting Hierarchical Rows"></a>Inserting Hierarchical Rows</h2><ul>
<li><code>LAST_INSERT_ID()</code> –  最近插入ID</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO orders (customer_id, order_date, status)<br>VALUES (1, &#x27;2019-01-02&#x27;, 1);<br><br>INSERT INTO order_items<br>VALUES<br>	(LAST_INSERT_ID(), 1, 1, 2.95),<br>	(LAST_INSERT_ID(), 2, 1, 3.95)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201143711374.png" alt="image-20221201143711374"></p>
<h2 id="Creating-a-Copy-of-a-Table"><a href="#Creating-a-Copy-of-a-Table" class="headerlink" title="Creating a Copy of a Table"></a>Creating a Copy of a Table</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE orders_archived AS<br>SELECT * FROM orders;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201151613569.png" alt="image-20221201151613569"></p>
<p>Truncate Table</p>
<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201151723929.png" alt="image-20221201151723929"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO orders_archived<br>SELECT *<br>FROM orders<br>WHERE order_date &lt; &#x27;2019-01-01&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201151817025.png" alt="image-20221201151817025"></p>
<h2 id="Updating-a-Single-Row"><a href="#Updating-a-Single-Row" class="headerlink" title="Updating a Single Row"></a>Updating a Single Row</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE invoices<br>SET payment_total = 10, payment_date = &#x27;2019-03-01&#x27;<br>WHERE invoice_id = 1<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/GIF%2012-1-2022%203-26-54%20PM.gif" alt="GIF 12-1-2022 3-26-54 PM"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE invoices<br>SET<br>	payment_total = invoice_total * 0.5,<br>	payment_date = due_date<br>WHERE invoice_id = 3<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/GIF%2012-1-2022%203-34-42%20PM.gif" alt="GIF 12-1-2022 3-34-42 PM"></p>
<h2 id="Updating-Multiple-Rows"><a href="#Updating-Multiple-Rows" class="headerlink" title="Updating Multiple Rows"></a>Updating Multiple Rows</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE invoices<br>SET<br>	payment_total = invoice_total * 0.5,<br>	payment_date = due_date<br>WHERE invoice_id IN (3, 4)<br></code></pre></td></tr></table></figure>



<h2 id="Using-Subqueries-in-Updates"><a href="#Using-Subqueries-in-Updates" class="headerlink" title="Using Subqueries in Updates"></a>Using Subqueries in Updates</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE invoices<br>SET<br>	payment_total = invoice_total * 0.5,<br>	payment_date = due_date<br>WHERE client_id IN<br>	(SELECT client_id<br>     FROM clients<br>     WHERE state IN (&#x27;CA&#x27;,&#x27;NY&#x27;))<br></code></pre></td></tr></table></figure>



<h2 id="Deleting-Rows"><a href="#Deleting-Rows" class="headerlink" title="Deleting Rows"></a>Deleting Rows</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELETE FROM invoices<br>WHERE client_id = (<br>	SELECT client_id<br>    FROM clients<br>    WHERE name = &#x27;Myworks&#x27;<br>)<br></code></pre></td></tr></table></figure>



<h1 id="Ⅴ"><a href="#Ⅴ" class="headerlink" title="Ⅴ"></a>Ⅴ</h1><h2 id="Aggregate-Functions"><a href="#Aggregate-Functions" class="headerlink" title="Aggregate Functions"></a>Aggregate Functions</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	MAX(invoice_total) AS highest,<br>	MIN(invoice_total) AS lowest,<br>	AVG(invoice_total) AS average,<br>	SUM(invoice_total * 1.1) AS total,<br>	COUNT(DISTINCT client_id) AS total_records<br>FROM invoices<br>WHERE invoice_date &gt; &#x27;2019-07-01&#x27;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201164656552.png" alt="image-20221201164656552"></p>
<h2 id="The-GROUP-BY-Clause"><a href="#The-GROUP-BY-Clause" class="headerlink" title="The GROUP BY Clause"></a>The GROUP BY Clause</h2><p>FROM-&gt;WHERE-&gt;GROUP BY-&gt;SELECT-&gt;ORDER BY</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	client_id,<br>	SUM(invoice_total) AS total_sales<br>FROM invoices<br>WHERE invoice_date &gt;= &#x27;2019-07-01&#x27;<br>GROUP BY client_id<br>ORDER BY total_sales DESC;<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201170410046.png" alt="image-20221201170410046"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	state,<br>	city,<br>	SUM(invoice_total) AS total_sales<br>FROM invoices<br>JOIN clients USING (client_id)<br>GROUP BY state, city<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201170432659.png" alt="image-20221201170432659"></p>
<h2 id="The-HAVING-Clause"><a href="#The-HAVING-Clause" class="headerlink" title="The HAVING Clause"></a>The HAVING Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	client_id,<br>	SUM(invoice_total) AS total_sales,<br>	COUNT(*) AS number_of_invoices<br>FROM invoices<br>GROUP BY client_id<br>HAVING total_sales &gt; 500 AND number_of_invoices &gt; 5<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201171533375.png" alt="image-20221201171533375"></p>
<h2 id="The-ROLLUP-Operator"><a href="#The-ROLLUP-Operator" class="headerlink" title="The ROLLUP Operator"></a>The ROLLUP Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	state,<br>	city,<br>	SUM(invoice_total) AS total_sales<br>FROM invoices<br>JOIN clients c USING (client_id)<br>GROUP BY state, city WITH ROLLUP<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201173117428.png" alt="image-20221201173117428"></p>
<h1 id="Ⅵ"><a href="#Ⅵ" class="headerlink" title="Ⅵ"></a>Ⅵ</h1><h2 id="Subqueries"><a href="#Subqueries" class="headerlink" title="Subqueries"></a>Subqueries</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM products<br>WHERE unit_price &gt; (<br>    SELECT unit_price<br>    FROM products<br>    WHERE product_id = 3<br>)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201174024448.png" alt="image-20221201174024448"></p>
<h2 id="The-IN-Operator-1"><a href="#The-IN-Operator-1" class="headerlink" title="The IN Operator"></a>The IN Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM products<br>WHERE product_id NOT IN (<br>    SELECT DISTINCT product_id<br>    FROM order_items<br>)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201174701644.png" alt="image-20221201174701644"></p>
<h2 id="Subqueries-vs-Joins"><a href="#Subqueries-vs-Joins" class="headerlink" title="Subqueries vs Joins"></a>Subqueries vs Joins</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- Find clients without invoices<br>SELECT *<br>FROM clients<br>WHERE client_id NOT IN (<br>    SELECT DISTINCT client_id<br>    FROM invoices<br>)<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM clients<br>LEFT JOIN invoices USING (client_id)<br>WHERE invoice_id IS NULL<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201175621092.png" alt="image-20221201175621092"></p>
<h2 id="The-ALL-Keyword"><a href="#The-ALL-Keyword" class="headerlink" title="The ALL Keyword"></a>The ALL Keyword</h2><p><code>NOT IN</code> &#x3D; <code>&lt;&gt;all</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM invoices<br>WHERE invoice_total &gt; (<br>    SELECT MAX(invoice_total)<br>    FROM invoices<br>    WHERE client_id = 3<br>)<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM invoices<br>WHERE invoice_total &gt; ALL (<br>    SELECT invoice_total<br>    FROM invoices<br>    WHERE client_id = 3<br>)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201180631709.png" alt="image-20221201180631709"></p>
<h2 id="The-ANY-Keyword"><a href="#The-ANY-Keyword" class="headerlink" title="The ANY Keyword"></a>The ANY Keyword</h2><p><code>IN</code> &#x3D; <code>=ANY</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- Select clients with at least two invoices<br>SELECT *<br>FROM clients<br>-- WHERE client_id IN (<br>WHERE client_id = ANY (<br>    SELECT client_id<br>    FROM invoices<br>    GROUP BY client_id<br>    HAVING COUNT(*) &gt;= 2<br>)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201181604228.png" alt="image-20221201181604228"></p>
<h2 id="Correlated-Subqueries"><a href="#Correlated-Subqueries" class="headerlink" title="Correlated Subqueries"></a>Correlated Subqueries</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- Select employees whose salary is above the average in their office<br>SELECT *<br>FROM employees e<br>WHERE salary &gt; (<br>    SELECT AVG(salary)<br>    FROM employees<br>    WHERE office_id = e.office_id<br>)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201183245679.png" alt="image-20221201183245679"></p>
<h2 id="The-EXISTS-Operator"><a href="#The-EXISTS-Operator" class="headerlink" title="The EXISTS Operator"></a>The EXISTS Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- Select clients that have an invoice<br>SELECT *<br>FROM clients<br>WHERE client_id IN (<br>    SELECT DISTINCT client_id<br>    FROM invoices<br>)<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT *<br>FROM clients c<br>WHERE EXISTS (<br>    SELECT client_id<br>    FROM invoices<br>    WHERE client_id = c.client_id<br>)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201193806982.png" alt="image-20221201193806982"></p>
<p><em>NOT EXISTS 比 NOT IN 效率高</em></p>
<h2 id="Subqueries-in-the-SELECT-Clause"><a href="#Subqueries-in-the-SELECT-Clause" class="headerlink" title="Subqueries in the SELECT Clause"></a>Subqueries in the SELECT Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	invoice_id,<br>    invoice_total,<br>    (SELECT AVG(invoice_total)<br>		FROM invoices) AS invoice_average,<br>	invoice_total - (SELECT invoice_average) AS difference<br>FROM invoices<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202085642576.png" alt="image-20221202085642576"></p>
<h2 id="Subqueries-in-the-FROM-Clause"><a href="#Subqueries-in-the-FROM-Clause" class="headerlink" title="Subqueries in the FROM Clause"></a>Subqueries in the FROM Clause</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">USE sql_invoicing;<br><br>SELECT *<br>FROM (<br>	SELECT<br>		client_id,<br>		name,<br>		(SELECT SUM(invoice_total)<br>			FROM invoices<br>			WHERE client_id = c.client_id) AS total_sales,<br>		(SELECT AVG(invoice_total) FROM invoices) AS average,<br>		(SELECT total_sales - average) AS difference<br>	FROM clients c<br>) AS sales_summary<br>WHERE total_sales IS NOT NULL<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221201200134326.png" alt="image-20221201200134326"></p>
<h1 id="Ⅶ"><a href="#Ⅶ" class="headerlink" title="Ⅶ"></a>Ⅶ</h1><h2 id="Numeric-Functions"><a href="#Numeric-Functions" class="headerlink" title="Numeric Functions"></a>Numeric Functions</h2><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_abs"><code>ABS()</code></a></td>
<td>返回绝对值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_acos"><code>ACOS()</code></a></td>
<td>返回反余弦</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_asin"><code>ASIN()</code></a></td>
<td>返回反正弦</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_atan"><code>ATAN()</code></a></td>
<td>返回反正切</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_atan2"><code>ATAN2()</code>,  <code>ATAN()</code></a></td>
<td>返回两个参数的反正切值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_ceil"><code>CEIL()</code></a></td>
<td>返回不小于参数的最小整数值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_ceiling"><code>CEILING()</code></a></td>
<td>返回不小于参数的最小整数值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_conv"><code>CONV()</code></a></td>
<td>在不同数基之间转换数字</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_cos"><code>COS()</code></a></td>
<td>返回余弦</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_cot"><code>COT()</code></a></td>
<td>返回余切</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_crc32"><code>CRC32()</code></a></td>
<td>计算循环冗余校验值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_degrees"><code>DEGREES()</code></a></td>
<td>将弧度转换为度数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_exp"><code>EXP()</code></a></td>
<td>提升到的力量</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_floor"><code>FLOOR()</code></a></td>
<td>返回不大于参数的最大整数值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_ln"><code>LN()</code></a></td>
<td>返回参数的自然对数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_log"><code>LOG()</code></a></td>
<td>返回第一个参数的自然对数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_log10"><code>LOG10()</code></a></td>
<td>返回参数的以 10 为底的对数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_log2"><code>LOG2()</code></a></td>
<td>返回参数的以 2 为底的对数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_mod"><code>MOD()</code></a></td>
<td>退还余数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_pi"><code>PI()</code></a></td>
<td>返回 pi 的值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_pow"><code>POW()</code></a></td>
<td>返回参数的指定幂</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_power"><code>POWER()</code></a></td>
<td>返回参数的指定幂</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_radians"><code>RADIANS()</code></a></td>
<td>返回参数转换为弧度</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_rand"><code>RAND()</code></a></td>
<td>返回一个随机浮点值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_round"><code>ROUND()</code></a></td>
<td>绕过论点</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_sign"><code>SIGN()</code></a></td>
<td>返回参数的符号</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_sin"><code>SIN()</code></a></td>
<td>返回参数的正弦</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_sqrt"><code>SQRT()</code></a></td>
<td>返回参数的平方根</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_tan"><code>TAN()</code></a></td>
<td>返回参数的正切</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_truncate"><code>TRUNCATE()</code></a></td>
<td>截断到指定的小数位数</td>
</tr>
</tbody></table>
<h2 id="String-Functions"><a href="#String-Functions" class="headerlink" title="String Functions"></a>String Functions</h2><table>
<thead>
<tr>
<th>姓名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ascii"><code>ASCII()</code></a></td>
<td>返回最左边字符的数值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_bin"><code>BIN()</code></a></td>
<td>返回包含数字二进制表示的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_bit-length"><code>BIT_LENGTH()</code></a></td>
<td>以位为单位返回参数的长度</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char"><code>CHAR()</code></a></td>
<td>返回传递的每个整数的字符</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char-length"><code>CHAR_LENGTH()</code></a></td>
<td>返回参数中的字符数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_character-length"><code>CHARACTER_LENGTH()</code></a></td>
<td>CHAR_LENGTH() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_concat"><code>CONCAT()</code></a></td>
<td>返回连接的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_concat-ws"><code>CONCAT_WS()</code></a></td>
<td>返回带分隔符的连接</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_elt"><code>ELT()</code></a></td>
<td>返回索引号处的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_export-set"><code>EXPORT_SET()</code></a></td>
<td>返回一个字符串，这样对于值位中设置的每个位，您       得到一个 on string，对于每个未设置的位，你得到一个 off string</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_field"><code>FIELD()</code></a></td>
<td>后续参数中第一个参数的索引（位置）</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_find-in-set"><code>FIND_IN_SET()</code></a></td>
<td>第二个参数中第一个参数的索引（位置）</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_format"><code>FORMAT()</code></a></td>
<td>返回格式化为指定小数位数的数字</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_from-base64"><code>FROM_BASE64()</code></a></td>
<td>解码base64编码的字符串并返回结果</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_hex"><code>HEX()</code></a></td>
<td>十进制或字符串值的十六进制表示</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_insert"><code>INSERT()</code></a></td>
<td>在指定位置插入子串，最多指定个数       人物</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_instr"><code>INSTR()</code></a></td>
<td>返回第一次出现的子字符串的索引</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lcase"><code>LCASE()</code></a></td>
<td>LOWER() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_left"><code>LEFT()</code></a></td>
<td>返回指定的最左边的字符数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_length"><code>LENGTH()</code></a></td>
<td>以字节为单位返回字符串的长度</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like"><code>LIKE</code></a></td>
<td>简单模式匹配</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_load-file"><code>LOAD_FILE()</code></a></td>
<td>加载命名文件</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_locate"><code>LOCATE()</code></a></td>
<td>返回子串第一次出现的位置</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lower"><code>LOWER()</code></a></td>
<td>以小写形式返回参数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lpad"><code>LPAD()</code></a></td>
<td>返回字符串参数，左填充指定的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ltrim"><code>LTRIM()</code></a></td>
<td>删除前导空格</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_make-set"><code>MAKE_SET()</code></a></td>
<td>返回一组以逗号分隔的字符串，这些字符串具有       位集中的相应位</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-search.html#function_match"><code>MATCH()</code></a></td>
<td>执行全文搜索</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_mid"><code>MID()</code></a></td>
<td>返回从指定位置开始的子串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_not-like"><code>NOT LIKE</code></a></td>
<td>简单模式匹配的否定</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_not-regexp"><code>NOT REGEXP</code></a></td>
<td>REGEXP 的否定</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_oct"><code>OCT()</code></a></td>
<td>返回包含数字的八进制表示的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_octet-length"><code>OCTET_LENGTH()</code></a></td>
<td>LENGTH() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ord"><code>ORD()</code></a></td>
<td>返回参数最左边字符的字符代码</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_position"><code>POSITION()</code></a></td>
<td>LOCATE() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_quote"><code>QUOTE()</code></a></td>
<td>转义参数以在 SQL 语句中使用</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_regexp"><code>REGEXP</code></a></td>
<td>字符串是否匹配正则表达式</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-instr"><code>REGEXP_INSTR()</code></a></td>
<td>子串匹配正则表达式的起始索引</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-like"><code>REGEXP_LIKE()</code></a></td>
<td>字符串是否匹配正则表达式</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-replace"><code>REGEXP_REPLACE()</code></a></td>
<td>替换匹配正则表达式的子串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-substr"><code>REGEXP_SUBSTR()</code></a></td>
<td>返回匹配正则表达式的子串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_repeat"><code>REPEAT()</code></a></td>
<td>重复一个字符串指定的次数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_replace"><code>REPLACE()</code></a></td>
<td>替换指定字符串的出现</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_reverse"><code>REVERSE()</code></a></td>
<td>反转字符串中的字符</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_right"><code>RIGHT()</code></a></td>
<td>返回指定的最右边的字符数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_regexp"><code>RLIKE</code></a></td>
<td>字符串是否匹配正则表达式</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_rpad"><code>RPAD()</code></a></td>
<td>追加字符串指定的次数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_rtrim"><code>RTRIM()</code></a></td>
<td>删除尾随空格</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_soundex"><code>SOUNDEX()</code></a></td>
<td>返回一个 soundex 字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#operator_sounds-like"><code>SOUNDS LIKE</code></a></td>
<td>比较声音</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_space"><code>SPACE()</code></a></td>
<td>返回指定空格数的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#function_strcmp"><code>STRCMP()</code></a></td>
<td>比较两个字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substr"><code>SUBSTR()</code></a></td>
<td>返回指定的子字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substring"><code>SUBSTRING()</code></a></td>
<td>返回指定的子字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substring-index"><code>SUBSTRING_INDEX()</code></a></td>
<td>返回字符串中指定数目之前的子串       分隔符的出现</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_to-base64"><code>TO_BASE64()</code></a></td>
<td>返回转换为 base-64 字符串的参数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_trim"><code>TRIM()</code></a></td>
<td>删除前导和尾随空格</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ucase"><code>UCASE()</code></a></td>
<td>UPPER() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_unhex"><code>UNHEX()</code></a></td>
<td>返回包含数字的十六进制表示的字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_upper"><code>UPPER()</code></a></td>
<td>转换为大写</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_weight-string"><code>WEIGHT_STRING()</code></a></td>
<td>返回字符串的权重字符串</td>
</tr>
</tbody></table>
<h2 id="Date-Functions"><a href="#Date-Functions" class="headerlink" title="Date Functions"></a>Date Functions</h2><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_adddate"><code>ADDDATE()</code></a></td>
<td>将时间值（间隔）添加到日期值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_addtime"><code>ADDTIME()</code></a></td>
<td>添加时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_convert-tz"><code>CONVERT_TZ()</code></a></td>
<td>从一个时区转换为另一个时区</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_curdate"><code>CURDATE()</code></a></td>
<td>返回当前日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_current-date"><code>CURRENT_DATE()</code>,  <code>CURRENT_DATE</code></a></td>
<td>CURDATE() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_current-time"><code>CURRENT_TIME()</code>,  <code>CURRENT_TIME</code></a></td>
<td>CURTIME() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_current-timestamp"><code>CURRENT_TIMESTAMP()</code>,  <code>CURRENT_TIMESTAMP</code></a></td>
<td>NOW() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_curtime"><code>CURTIME()</code></a></td>
<td>返回当前时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date"><code>DATE()</code></a></td>
<td>提取日期或日期时间表达式的日期部分</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-add"><code>DATE_ADD()</code></a></td>
<td>将时间值（间隔）添加到日期值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format"><code>DATE_FORMAT()</code></a></td>
<td>按指定格式设置日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-sub"><code>DATE_SUB()</code></a></td>
<td>从日期中减去时间值（间隔）</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_datediff"><code>DATEDIFF()</code></a></td>
<td>减去两个日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_day"><code>DAY()</code></a></td>
<td>DAYOFMONTH() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_dayname"><code>DAYNAME()</code></a></td>
<td>返回工作日的名称</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_dayofmonth"><code>DAYOFMONTH()</code></a></td>
<td>返回月份中的第几天 (0-31)</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_dayofweek"><code>DAYOFWEEK()</code></a></td>
<td>返回参数的工作日索引</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_dayofyear"><code>DAYOFYEAR()</code></a></td>
<td>返回一年中的第几天 (1-366)</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_extract"><code>EXTRACT()</code></a></td>
<td>提取日期的一部分</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_from-days"><code>FROM_DAYS()</code></a></td>
<td>将天数转换为日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_from-unixtime"><code>FROM_UNIXTIME()</code></a></td>
<td>将 Unix 时间戳格式化为日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_get-format"><code>GET_FORMAT()</code></a></td>
<td>返回日期格式字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_hour"><code>HOUR()</code></a></td>
<td>提取小时</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_last-day"><code>LAST_DAY</code></a></td>
<td>返回参数月份的最后一天</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_localtime"><code>LOCALTIME()</code>,  <code>LOCALTIME</code></a></td>
<td>NOW() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_localtimestamp"><code>LOCALTIMESTAMP</code>,  <code>LOCALTIMESTAMP()</code></a></td>
<td>NOW() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_makedate"><code>MAKEDATE()</code></a></td>
<td>从年份和年份创建日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_maketime"><code>MAKETIME()</code></a></td>
<td>从小时、分钟、秒创建时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_microsecond"><code>MICROSECOND()</code></a></td>
<td>从参数返回微秒</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_minute"><code>MINUTE()</code></a></td>
<td>从参数中返回分钟</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_month"><code>MONTH()</code></a></td>
<td>从传递的日期返回月份</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_monthname"><code>MONTHNAME()</code></a></td>
<td>返回月份名称</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_now"><code>NOW()</code></a></td>
<td>返回当前日期和时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_period-add"><code>PERIOD_ADD()</code></a></td>
<td>在年月中添加句点</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_period-diff"><code>PERIOD_DIFF()</code></a></td>
<td>返回期间之间的月数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_quarter"><code>QUARTER()</code></a></td>
<td>从日期参数返回季度</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_sec-to-time"><code>SEC_TO_TIME()</code></a></td>
<td>将秒数转换为 ‘hh:mm:ss’ 格式</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_second"><code>SECOND()</code></a></td>
<td>返回第二个 (0-59)</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_str-to-date"><code>STR_TO_DATE()</code></a></td>
<td>将字符串转换为日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_subdate"><code>SUBDATE()</code></a></td>
<td>使用三个参数调用时 DATE_SUB() 的同义词</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_subtime"><code>SUBTIME()</code></a></td>
<td>减去次数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_sysdate"><code>SYSDATE()</code></a></td>
<td>返回函数执行的时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_time"><code>TIME()</code></a></td>
<td>提取传递的表达式的时间部分</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_time-format"><code>TIME_FORMAT()</code></a></td>
<td>格式化为时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_time-to-sec"><code>TIME_TO_SEC()</code></a></td>
<td>返回转换为秒的参数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_timediff"><code>TIMEDIFF()</code></a></td>
<td>减去时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_timestamp"><code>TIMESTAMP()</code></a></td>
<td>使用单个参数，此函数返回日期或日期时间       表达;  有两个参数，参数之和</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_timestampadd"><code>TIMESTAMPADD()</code></a></td>
<td>向日期时间表达式添加间隔</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_timestampdiff"><code>TIMESTAMPDIFF()</code></a></td>
<td>从日期时间表达式中减去一个间隔</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_to-days"><code>TO_DAYS()</code></a></td>
<td>返回转换为天数的日期参数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_to-seconds"><code>TO_SECONDS()</code></a></td>
<td>返回转换为秒数的日期或日期时间参数       0年</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_unix-timestamp"><code>UNIX_TIMESTAMP()</code></a></td>
<td>返回一个 Unix 时间戳</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_utc-date"><code>UTC_DATE()</code></a></td>
<td>返回当前 UTC 日期</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_utc-time"><code>UTC_TIME()</code></a></td>
<td>返回当前 UTC 时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_utc-timestamp"><code>UTC_TIMESTAMP()</code></a></td>
<td>返回当前 UTC 日期和时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_week"><code>WEEK()</code></a></td>
<td>返回周数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_weekday"><code>WEEKDAY()</code></a></td>
<td>返回工作日索引</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_weekofyear"><code>WEEKOFYEAR()</code></a></td>
<td>返回日期的日历周 (1-53)</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_year"><code>YEAR()</code></a></td>
<td>返回年份</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_yearweek"><code>YEARWEEK()</code></a></td>
<td>返回年份和星期</td>
</tr>
</tbody></table>
<h2 id="Formatting-Dates-and-Times"><a href="#Formatting-Dates-and-Times" class="headerlink" title="Formatting Dates and Times"></a>Formatting Dates and Times</h2><table>
<thead>
<tr>
<th>说明符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>%a</code></td>
<td>缩写的工作日名称                 ( <code>Sun</code>.. <code>Sat</code>)</td>
</tr>
<tr>
<td><code>%b</code></td>
<td>缩写月份名称 ( <code>Jan</code>.. <code>Dec</code>)</td>
</tr>
<tr>
<td><code>%c</code></td>
<td>月份，数字 ( <code>0</code>.. <code>12</code>)</td>
</tr>
<tr>
<td><code>%D</code></td>
<td>带有英文后缀的月份中的第几天 ( <code>0th</code>,                 <code>1st</code>,  <code>2nd</code>,                 <code>3rd</code>, …)</td>
</tr>
<tr>
<td><code>%d</code></td>
<td>一个月中的第几天，数字 ( <code>00</code>.. <code>31</code>)</td>
</tr>
<tr>
<td><code>%e</code></td>
<td>一个月中的第几天，数字 ( <code>0</code>.. <code>31</code>)</td>
</tr>
<tr>
<td><code>%f</code></td>
<td>微秒 ( <code>000000</code>.. <code>999999</code>)</td>
</tr>
<tr>
<td><code>%H</code></td>
<td>小时 （ <code>00</code>.. <code>23</code>)</td>
</tr>
<tr>
<td><code>%h</code></td>
<td>小时 （ <code>01</code>.. <code>12</code>)</td>
</tr>
<tr>
<td><code>%I</code></td>
<td>小时 （ <code>01</code>.. <code>12</code>)</td>
</tr>
<tr>
<td><code>%i</code></td>
<td>分钟，数字 ( <code>00</code>.. <code>59</code>)</td>
</tr>
<tr>
<td><code>%j</code></td>
<td>一年中的第几天 ( <code>001</code>.. <code>366</code>)</td>
</tr>
<tr>
<td><code>%k</code></td>
<td>小时 （ <code>0</code>.. <code>23</code>)</td>
</tr>
<tr>
<td><code>%l</code></td>
<td>小时 （ <code>1</code>.. <code>12</code>)</td>
</tr>
<tr>
<td><code>%M</code></td>
<td>月名 ( <code>January</code>.. <code>December</code>)</td>
</tr>
<tr>
<td><code>%m</code></td>
<td>月份，数字 ( <code>00</code>.. <code>12</code>)</td>
</tr>
<tr>
<td><code>%p</code></td>
<td><code>AM</code>或者 <code>PM</code></td>
</tr>
<tr>
<td><code>%r</code></td>
<td>时间，12 小时（ *<code>hh:mm:ss</code>*其次是                 <code>AM</code>或者 <code>PM</code>)</td>
</tr>
<tr>
<td><code>%S</code></td>
<td>秒 ( <code>00</code>.. <code>59</code>)</td>
</tr>
<tr>
<td><code>%s</code></td>
<td>秒 ( <code>00</code>.. <code>59</code>)</td>
</tr>
<tr>
<td><code>%T</code></td>
<td>时间，24 小时制（ <em><code>hh:mm:ss</code></em>)</td>
</tr>
<tr>
<td><code>%U</code></td>
<td>星期 （ <code>00</code>.. <code>53</code>), 其中周日是                 一周的第一天；                 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_week"><code>WEEK()</code></a>模式 0</td>
</tr>
<tr>
<td><code>%u</code></td>
<td>星期 （ <code>00</code>.. <code>53</code>), 其中星期一是                 一周的第一天；                 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_week"><code>WEEK()</code></a>方式一</td>
</tr>
<tr>
<td><code>%V</code></td>
<td>星期 （ <code>01</code>.. <code>53</code>), 其中周日是                 一周的第一天；                 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_week"><code>WEEK()</code></a>方式二；  与                 <code>%X</code></td>
</tr>
<tr>
<td><code>%v</code></td>
<td>星期 （ <code>01</code>.. <code>53</code>), 其中星期一是                 一周的第一天；                 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_week"><code>WEEK()</code></a>模式 3；  与                 <code>%x</code></td>
</tr>
<tr>
<td><code>%W</code></td>
<td>工作日名称 ( <code>Sunday</code>.. <code>Saturday</code>)</td>
</tr>
<tr>
<td><code>%w</code></td>
<td>一周中的天                 ( <code>0</code>&#x3D;星期天.. <code>6</code>&#x3D;星期六）</td>
</tr>
<tr>
<td><code>%X</code></td>
<td>星期日是一周的第一天的那一周的年份，数字，                 四位数;  与 <code>%V</code></td>
</tr>
<tr>
<td><code>%x</code></td>
<td>一周的年份，其中星期一是一周的第一天，数字，                 四位数;  与 <code>%v</code></td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>年份，数字，四位数字</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>年份，数字（两位数）</td>
</tr>
<tr>
<td><code>%%</code></td>
<td>文字 <code>%</code>特点</td>
</tr>
<tr>
<td><code>%*</code>x<code>*</code></td>
<td><em><code>x</code></em>, 对于任何                   “ *<code>x</code>*” 未列出                   以上</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT TIME_FORMAT(NOW(), &#x27;%H:%i %p&#x27;)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202102153269.png" alt="image-20221202102153269"></p>
<h2 id="Calculating-Dates-and-Times"><a href="#Calculating-Dates-and-Times" class="headerlink" title="Calculating Dates and Times"></a>Calculating Dates and Times</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DATE_ADD(NOW(), INTERVAL 1 YEAR)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202102647449.png" alt="image-20221202102647449"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- SELECT DATE_ADD(NOW(), INTERVAL -1 YEAR)<br>SELECT DATE_SUB(NOW(), INTERVAL 1 YEAR)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202102714372.png" alt="image-20221202102714372"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DATEDIFF(&#x27;2019-01-05&#x27;, &#x27;2019-01-01&#x27;)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202102942396.png" alt="image-20221202102942396"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT TIME_TO_SEC(&#x27;09:00&#x27;)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202103123832.png" alt="image-20221202103123832"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT TIME_TO_SEC(&#x27;09:00&#x27;) - TIME_TO_SEC(&#x27;09:02&#x27;)<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202103257559.png" alt="image-20221202103257559"></p>
<h2 id="The-IFNULL-and-COALESCE-Functions"><a href="#The-IFNULL-and-COALESCE-Functions" class="headerlink" title="The IFNULL and COALESCE Functions"></a>The IFNULL and COALESCE Functions</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	order_id,<br>	IFNULL(shipper_id, &#x27;Not assigned&#x27;) AS shipper<br>FROM orders<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202103730389.png" alt="image-20221202103730389"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	order_id,<br>	COALESCE(shipper_id, comments, &#x27;Not assigned&#x27;) AS shipper<br>FROM orders<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202103933229.png" alt="image-20221202103933229"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	order_id,<br>	IFNULL(shipper_id, &#x27;...&#x27;),<br>    COALESCE(shipper_id, comments, &#x27;Not assigned&#x27;) AS shipper<br>FROM orders<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202104109668.png" alt="image-20221202104109668"></p>
<h2 id="The-IF-Function"><a href="#The-IF-Function" class="headerlink" title="The IF Function"></a>The IF Function</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	order_id,<br>	order_date,<br>    IF(<br>		YEAR(order_date) = YEAR(NOW()),<br>        &#x27;Active&#x27;,<br>        &#x27;Archived&#x27;) AS category<br>FROM orders<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202104820370.png" alt="image-20221202104820370"></p>
<h2 id="The-CASE-Operator"><a href="#The-CASE-Operator" class="headerlink" title="The CASE Operator"></a>The CASE Operator</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT<br>	order_id,<br>    CASE<br>		WHEN YEAR(order_date) = YEAR(NOW()) THEN &#x27;Active&#x27;<br>        WHEN YEAR(order_date) = YEAR(NOW()) - 1 THEN &#x27;Last Year&#x27;<br>        WHEN YEAR(order_date) &lt; YEAR(NOW()) - 1 THEN &#x27;Archived&#x27;<br>        ELSE &#x27;Future&#x27;<br>	END AS category<br>FROM orders<br></code></pre></td></tr></table></figure>

<p><img src="https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20221202105738795.png" alt="image-20221202105738795"></p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2022/12/06/WebBackend/Java/Druid%E6%A1%88%E4%BE%8B/">← Next Druid案例</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2022/11/30/WebBackend/Java/String%E3%80%81StringBuffer%E5%92%8CStringBuilder/">String、StringBuffer和StringBuilder Prev →</a></div></div></div></div><div id="bottom-btn"><a id="to-index" href="#toc-div" title="文章目录">≡</a><a id="to-top" onClick="scrolls.scrolltop();" title="to top" style="opacity: 0; display: none;">∧</a></div></article><aside><div id="aside-top"><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">WRXinYue</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>文章目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A1"><span class="toc-number">1.</span> <span class="toc-text">Ⅱ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-SELECT-Clause"><span class="toc-number">1.1.</span> <span class="toc-text">The SELECT Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-WHERE-Clause"><span class="toc-number">1.2.</span> <span class="toc-text">The WHERE Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-AND-OR-and-NOT-Operators"><span class="toc-number">1.3.</span> <span class="toc-text">The AND,OR and NOT Operators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-IN-Operator"><span class="toc-number">1.4.</span> <span class="toc-text">The IN Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-BETWEEN-Operator"><span class="toc-number">1.5.</span> <span class="toc-text">The BETWEEN Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-LIKE-Operator"><span class="toc-number">1.6.</span> <span class="toc-text">The LIKE Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-REGEXP-Operator"><span class="toc-number">1.7.</span> <span class="toc-text">The REGEXP Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-IS-NULL-Operator"><span class="toc-number">1.8.</span> <span class="toc-text">The IS NULL Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-ORDER-BY-Clause"><span class="toc-number">1.9.</span> <span class="toc-text">The ORDER BY Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-LIMIT-Clause"><span class="toc-number">1.10.</span> <span class="toc-text">The LIMIT Clause</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A2"><span class="toc-number">2.</span> <span class="toc-text">Ⅲ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Inner-Joins"><span class="toc-number">2.1.</span> <span class="toc-text">Inner Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Joining-Across-Databases"><span class="toc-number">2.2.</span> <span class="toc-text">Joining Across Databases</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Self-Joins"><span class="toc-number">2.3.</span> <span class="toc-text">Self Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Joining-Multiple-Tables"><span class="toc-number">2.4.</span> <span class="toc-text">Joining Multiple Tables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Compound-Join-Conditions"><span class="toc-number">2.5.</span> <span class="toc-text">Compound Join Conditions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implicit-Join-Syntax"><span class="toc-number">2.6.</span> <span class="toc-text">Implicit Join Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Outer-Joins"><span class="toc-number">2.7.</span> <span class="toc-text">Outer Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Outer-Joins-Between-Multiple-Tables"><span class="toc-number">2.8.</span> <span class="toc-text">Outer Joins Between Multiple Tables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Self-Outer-Joins"><span class="toc-number">2.9.</span> <span class="toc-text">Self Outer Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-USING-Clause"><span class="toc-number">2.10.</span> <span class="toc-text">The USING Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Natural-Joins"><span class="toc-number">2.11.</span> <span class="toc-text">Natural Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cross-Joins"><span class="toc-number">2.12.</span> <span class="toc-text">Cross Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unions"><span class="toc-number">2.13.</span> <span class="toc-text">Unions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A3"><span class="toc-number">3.</span> <span class="toc-text">Ⅳ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Column-Attributes"><span class="toc-number">3.1.</span> <span class="toc-text">Column Attributes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inserting-a-Single-Row"><span class="toc-number">3.2.</span> <span class="toc-text">Inserting a Single Row</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inserting-Multiple-Rows"><span class="toc-number">3.3.</span> <span class="toc-text">Inserting Multiple Rows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inserting-Hierarchical-Rows"><span class="toc-number">3.4.</span> <span class="toc-text">Inserting Hierarchical Rows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-a-Copy-of-a-Table"><span class="toc-number">3.5.</span> <span class="toc-text">Creating a Copy of a Table</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Updating-a-Single-Row"><span class="toc-number">3.6.</span> <span class="toc-text">Updating a Single Row</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Updating-Multiple-Rows"><span class="toc-number">3.7.</span> <span class="toc-text">Updating Multiple Rows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Subqueries-in-Updates"><span class="toc-number">3.8.</span> <span class="toc-text">Using Subqueries in Updates</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deleting-Rows"><span class="toc-number">3.9.</span> <span class="toc-text">Deleting Rows</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A4"><span class="toc-number">4.</span> <span class="toc-text">Ⅴ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Aggregate-Functions"><span class="toc-number">4.1.</span> <span class="toc-text">Aggregate Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-GROUP-BY-Clause"><span class="toc-number">4.2.</span> <span class="toc-text">The GROUP BY Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-HAVING-Clause"><span class="toc-number">4.3.</span> <span class="toc-text">The HAVING Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-ROLLUP-Operator"><span class="toc-number">4.4.</span> <span class="toc-text">The ROLLUP Operator</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A5"><span class="toc-number">5.</span> <span class="toc-text">Ⅵ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Subqueries"><span class="toc-number">5.1.</span> <span class="toc-text">Subqueries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-IN-Operator-1"><span class="toc-number">5.2.</span> <span class="toc-text">The IN Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subqueries-vs-Joins"><span class="toc-number">5.3.</span> <span class="toc-text">Subqueries vs Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-ALL-Keyword"><span class="toc-number">5.4.</span> <span class="toc-text">The ALL Keyword</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-ANY-Keyword"><span class="toc-number">5.5.</span> <span class="toc-text">The ANY Keyword</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Correlated-Subqueries"><span class="toc-number">5.6.</span> <span class="toc-text">Correlated Subqueries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-EXISTS-Operator"><span class="toc-number">5.7.</span> <span class="toc-text">The EXISTS Operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subqueries-in-the-SELECT-Clause"><span class="toc-number">5.8.</span> <span class="toc-text">Subqueries in the SELECT Clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subqueries-in-the-FROM-Clause"><span class="toc-number">5.9.</span> <span class="toc-text">Subqueries in the FROM Clause</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%85%A6"><span class="toc-number">6.</span> <span class="toc-text">Ⅶ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Numeric-Functions"><span class="toc-number">6.1.</span> <span class="toc-text">Numeric Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String-Functions"><span class="toc-number">6.2.</span> <span class="toc-text">String Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Date-Functions"><span class="toc-number">6.3.</span> <span class="toc-text">Date Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Formatting-Dates-and-Times"><span class="toc-number">6.4.</span> <span class="toc-text">Formatting Dates and Times</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Calculating-Dates-and-Times"><span class="toc-number">6.5.</span> <span class="toc-text">Calculating Dates and Times</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-IFNULL-and-COALESCE-Functions"><span class="toc-number">6.6.</span> <span class="toc-text">The IFNULL and COALESCE Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-IF-Function"><span class="toc-number">6.7.</span> <span class="toc-text">The IF Function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-CASE-Operator"><span class="toc-number">6.8.</span> <span class="toc-text">The CASE Operator</span></a></li></ol></li></ol></div></div></div><footer><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight</a></nobr><wbr><nobr>主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script class="pjax-js">reset=_=>{code.findCode();mermaid.init(undefined, ('.mermaid'));}</script><script src="/js/arknights.js"></script><script>window.addEventListener("load",()=>{reset()})</script></body></html>